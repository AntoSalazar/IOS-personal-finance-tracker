{
    "openapi": "3.0.0",
    "info": {
        "title": "Personal Finance Tracker API",
        "version": "1.0.0",
        "description": "API documentation for the Personal Finance Tracker application"
    },
    "components": {
        "securitySchemes": {
            "BearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        },
        "schemas": {
            "UpdateAccountInput": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "CHECKING",
                            "SAVINGS",
                            "CREDIT_CARD",
                            "INVESTMENT",
                            "CASH",
                            "OTHER"
                        ]
                    },
                    "balance": {
                        "type": "number"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "isActive": {
                        "type": "boolean"
                    }
                }
            },
            "Account": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "CHECKING",
                            "SAVINGS",
                            "CREDIT_CARD",
                            "INVESTMENT",
                            "CASH",
                            "OTHER"
                        ]
                    },
                    "balance": {
                        "type": "number"
                    },
                    "currency": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    }
                }
            },
            "CreateAccountInput": {
                "type": "object",
                "required": [
                    "name",
                    "type",
                    "balance"
                ],
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "CHECKING",
                            "SAVINGS",
                            "CREDIT_CARD",
                            "INVESTMENT",
                            "CASH",
                            "OTHER"
                        ]
                    },
                    "balance": {
                        "type": "number"
                    },
                    "currency": {
                        "type": "string",
                        "default": "USD"
                    },
                    "description": {
                        "type": "string"
                    }
                }
            },
            "UpdateCategoryInput": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "color": {
                        "type": "string"
                    },
                    "icon": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "EXPENSE",
                            "INCOME"
                        ]
                    },
                    "parentId": {
                        "type": "string"
                    }
                }
            },
            "Category": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "color": {
                        "type": "string"
                    },
                    "icon": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "EXPENSE",
                            "INCOME"
                        ]
                    },
                    "parentId": {
                        "type": "string"
                    }
                }
            },
            "CreateCategoryInput": {
                "type": "object",
                "required": [
                    "name",
                    "type"
                ],
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "EXPENSE",
                            "INCOME"
                        ]
                    },
                    "description": {
                        "type": "string"
                    },
                    "color": {
                        "type": "string"
                    },
                    "icon": {
                        "type": "string"
                    },
                    "parentId": {
                        "type": "string"
                    }
                }
            },
            "SellCryptoHoldingInput": {
                "type": "object",
                "required": [
                    "salePrice",
                    "saleDate",
                    "saleAccountId",
                    "categoryId"
                ],
                "properties": {
                    "salePrice": {
                        "type": "number"
                    },
                    "saleDate": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "saleFee": {
                        "type": "number"
                    },
                    "saleAccountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    }
                }
            },
            "CryptoHolding": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "symbol": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "purchasePrice": {
                        "type": "number"
                    },
                    "currentPrice": {
                        "type": "number"
                    },
                    "purchaseDate": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "purchaseFee": {
                        "type": "number"
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "CreateCryptoHoldingInput": {
                "type": "object",
                "required": [
                    "symbol",
                    "name",
                    "amount",
                    "purchasePrice",
                    "purchaseDate"
                ],
                "properties": {
                    "symbol": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "purchasePrice": {
                        "type": "number"
                    },
                    "purchaseDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "purchaseFee": {
                        "type": "number"
                    },
                    "notes": {
                        "type": "string"
                    },
                    "accountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    }
                }
            },
            "MarkDebtAsPaidInput": {
                "type": "object",
                "required": [
                    "accountId",
                    "categoryId"
                ],
                "properties": {
                    "accountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "paidDate": {
                        "type": "string",
                        "format": "date",
                        "description": "YYYY-MM-DD"
                    }
                }
            },
            "UpdateDebtInput": {
                "type": "object",
                "properties": {
                    "personName": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "description": {
                        "type": "string"
                    },
                    "dueDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "Debt": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "personName": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "description": {
                        "type": "string"
                    },
                    "dueDate": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "isPaid": {
                        "type": "boolean"
                    },
                    "paidDate": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "CreateDebtInput": {
                "type": "object",
                "required": [
                    "personName",
                    "amount"
                ],
                "properties": {
                    "personName": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "description": {
                        "type": "string"
                    },
                    "dueDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "UpdateSubscriptionInput": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "frequency": {
                        "type": "string",
                        "enum": [
                            "WEEKLY",
                            "MONTHLY",
                            "QUARTERLY",
                            "YEARLY"
                        ]
                    },
                    "nextBillingDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "accountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "ACTIVE",
                            "PAUSED",
                            "CANCELLED"
                        ]
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "Subscription": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "frequency": {
                        "type": "string",
                        "enum": [
                            "WEEKLY",
                            "MONTHLY",
                            "QUARTERLY",
                            "YEARLY"
                        ]
                    },
                    "nextBillingDate": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "accountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "ACTIVE",
                            "PAUSED",
                            "CANCELLED"
                        ]
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "CreateSubscriptionInput": {
                "type": "object",
                "required": [
                    "name",
                    "amount",
                    "frequency",
                    "nextBillingDate",
                    "accountId",
                    "categoryId"
                ],
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "frequency": {
                        "type": "string",
                        "enum": [
                            "WEEKLY",
                            "MONTHLY",
                            "QUARTERLY",
                            "YEARLY"
                        ]
                    },
                    "nextBillingDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "accountId": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "notes": {
                        "type": "string"
                    }
                }
            },
            "Transaction": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string"
                    },
                    "accountId": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "EXPENSE",
                            "INCOME",
                            "TRANSFER"
                        ]
                    },
                    "description": {
                        "type": "string"
                    },
                    "reason": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "date": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "CreateTransactionInput": {
                "type": "object",
                "required": [
                    "accountId",
                    "amount",
                    "type",
                    "description",
                    "categoryId",
                    "date"
                ],
                "properties": {
                    "accountId": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "EXPENSE",
                            "INCOME",
                            "TRANSFER"
                        ]
                    },
                    "description": {
                        "type": "string"
                    },
                    "reason": {
                        "type": "string"
                    },
                    "categoryId": {
                        "type": "string"
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "description": "YYYY-MM-DD"
                    },
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "CreateTransferInput": {
                "type": "object",
                "required": [
                    "fromAccountId",
                    "toAccountId",
                    "amount",
                    "description",
                    "date"
                ],
                "properties": {
                    "fromAccountId": {
                        "type": "string"
                    },
                    "toAccountId": {
                        "type": "string"
                    },
                    "amount": {
                        "type": "number"
                    },
                    "description": {
                        "type": "string"
                    },
                    "date": {
                        "type": "string",
                        "format": "date"
                    }
                }
            }
        }
    },
    "security": [],
    "paths": {
        "/api/accounts/{id}": {
            "get": {
                "summary": "Get an account by ID",
                "description": "Retrieve details of a specific account.",
                "tags": [
                    "Accounts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved account details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Account"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - account belongs to another user"
                    },
                    "404": {
                        "description": "Account not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "put": {
                "summary": "Update an account",
                "description": "Update details of an existing account.",
                "tags": [
                    "Accounts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateAccountInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Account successfully updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Account"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - account belongs to another user"
                    },
                    "404": {
                        "description": "Account not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "delete": {
                "summary": "Delete an account",
                "description": "Permanently delete an account.",
                "tags": [
                    "Accounts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Account successfully deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - account belongs to another user"
                    },
                    "404": {
                        "description": "Account not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/accounts": {
            "get": {
                "summary": "Get all accounts",
                "description": "Retrieve a list of all accounts for the authenticated user along with the total balance.",
                "tags": [
                    "Accounts"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved accounts",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "accounts": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Account"
                                            }
                                        },
                                        "totalBalance": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a new account",
                "description": "Create a new financial account for the user.",
                "tags": [
                    "Accounts"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateAccountInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Account successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Account"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/auth/sign-in/email": {
            "post": {
                "summary": "Sign in with email and password",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email",
                                    "password"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful sign in"
                    },
                    "400": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/api/auth/sign-up/email": {
            "post": {
                "summary": "Sign up with email and password",
                "tags": [
                    "Auth"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "required": [
                                    "email",
                                    "password",
                                    "name"
                                ],
                                "properties": {
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "name": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful sign up"
                    },
                    "400": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/auth/sign-out": {
            "post": {
                "summary": "Sign out",
                "tags": [
                    "Auth"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully signed out"
                    }
                }
            }
        },
        "/api/auth/session": {
            "get": {
                "summary": "Get current session",
                "tags": [
                    "Auth"
                ],
                "responses": {
                    "200": {
                        "description": "Current session data",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "email": {
                                                    "type": "string"
                                                },
                                                "name": {
                                                    "type": "string"
                                                }
                                            }
                                        },
                                        "session": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "string"
                                                },
                                                "expiresAt": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/categories/{id}": {
            "get": {
                "summary": "Get a category by ID",
                "description": "Retrieve details of a specific category.",
                "tags": [
                    "Categories"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved category details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Category not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "put": {
                "summary": "Update a category",
                "description": "Update details of an existing category.",
                "tags": [
                    "Categories"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateCategoryInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Category successfully updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Category not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "delete": {
                "summary": "Delete a category",
                "description": "Permanently delete a category.",
                "tags": [
                    "Categories"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Category successfully deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Category not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/categories": {
            "get": {
                "summary": "Get all categories",
                "description": "Retrieve a list of categories, optionally filtered by type.",
                "tags": [
                    "Categories"
                ],
                "parameters": [
                    {
                        "name": "type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "EXPENSE",
                                "INCOME"
                            ]
                        },
                        "description": "Filter by category type"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved categories",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "categories": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Category"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a new category",
                "description": "Create a new category for transactions.",
                "tags": [
                    "Categories"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCategoryInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Category successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Category"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/crypto/{id}/sell": {
            "post": {
                "summary": "Sell a crypto holding",
                "description": "Sell an existing crypto holding or a portion of it.",
                "tags": [
                    "Crypto"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SellCryptoHoldingInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Crypto holding successfully sold",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CryptoHolding"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Crypto holding not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/crypto": {
            "get": {
                "summary": "Get crypto portfolio",
                "description": "Retrieve all crypto holdings for the user.",
                "tags": [
                    "Crypto"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved crypto portfolio",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "holdings": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/CryptoHolding"
                                            }
                                        },
                                        "totalValue": {
                                            "type": "number"
                                        },
                                        "totalCost": {
                                            "type": "number"
                                        },
                                        "totalProfitLoss": {
                                            "type": "number"
                                        },
                                        "profitLossPercentage": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a crypto holding",
                "description": "Add a new cryptocurrency holding to the portfolio.",
                "tags": [
                    "Crypto"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateCryptoHoldingInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Crypto holding successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CryptoHolding"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/crypto/start-updater": {
            "post": {
                "summary": "Start crypto price updater",
                "description": "Start the background process to update crypto prices.",
                "tags": [
                    "Crypto"
                ],
                "responses": {
                    "200": {
                        "description": "Price updater started successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "get": {
                "summary": "Get price updater status",
                "description": "Check if the crypto price updater is running.",
                "tags": [
                    "Crypto"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "isRunning": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/crypto/update-prices": {
            "post": {
                "summary": "Trigger manual price update",
                "description": "Force an immediate update of all crypto prices.",
                "tags": [
                    "Crypto"
                ],
                "responses": {
                    "200": {
                        "description": "Crypto prices updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/debts/{id}/pay": {
            "post": {
                "summary": "Mark a debt as paid",
                "description": "Mark an existing debt as paid, automatically creating the corresponding transaction.",
                "tags": [
                    "Debts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MarkDebtAsPaidInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Debt successfully marked as paid",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Debt"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Debt not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/debts/{id}": {
            "get": {
                "summary": "Get a debt by ID",
                "description": "Retrieve details of a specific debt.",
                "tags": [
                    "Debts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved debt details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Debt"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - debt belongs to another user"
                    },
                    "404": {
                        "description": "Debt not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "put": {
                "summary": "Update a debt",
                "description": "Update details of an existing debt.",
                "tags": [
                    "Debts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateDebtInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Debt successfully updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Debt"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Debt not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "delete": {
                "summary": "Delete a debt",
                "description": "Permanently delete a debt.",
                "tags": [
                    "Debts"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Debt successfully deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Debt not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/debts": {
            "get": {
                "summary": "Get all debts",
                "description": "Retrieve a list of debts, optionally filtered by paid status.",
                "tags": [
                    "Debts"
                ],
                "parameters": [
                    {
                        "name": "isPaid",
                        "in": "query",
                        "schema": {
                            "type": "boolean"
                        },
                        "description": "Filter by paid status"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved debts",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "debts": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Debt"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a new debt record",
                "description": "Track a new debt owed to or by someone.",
                "tags": [
                    "Debts"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateDebtInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Debt successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Debt"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/debts/summary": {
            "get": {
                "summary": "Get debts summary",
                "description": "Retrieve a summary of total debts, amounts, and paid/unpaid breakdowns.",
                "tags": [
                    "Debts"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved debts summary",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "totalDebts": {
                                            "type": "number"
                                        },
                                        "totalAmount": {
                                            "type": "number"
                                        },
                                        "paidDebts": {
                                            "type": "number"
                                        },
                                        "paidAmount": {
                                            "type": "number"
                                        },
                                        "unpaidDebts": {
                                            "type": "number"
                                        },
                                        "unpaidAmount": {
                                            "type": "number"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/export": {
            "get": {
                "summary": "Export data to Excel",
                "description": "Download a comprehensive Excel report of all financial data.",
                "tags": [
                    "Export"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully generated Excel file",
                        "content": {
                            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/statistics": {
            "get": {
                "summary": "Get financial statistics",
                "description": "Retrieve statistics for a specified period including category breakdowns, monthly trends, and top spending.",
                "tags": [
                    "Statistics"
                ],
                "parameters": [
                    {
                        "name": "period",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "month",
                                "quarter",
                                "year",
                                "all"
                            ],
                            "default": "month"
                        },
                        "description": "Time period for statistics"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved statistics",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "period": {
                                            "type": "string"
                                        },
                                        "dateRange": {
                                            "type": "object",
                                            "properties": {
                                                "start": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                },
                                                "end": {
                                                    "type": "string",
                                                    "format": "date-time"
                                                }
                                            }
                                        },
                                        "summary": {
                                            "type": "object",
                                            "properties": {
                                                "totalIncome": {
                                                    "type": "number"
                                                },
                                                "totalExpenses": {
                                                    "type": "number"
                                                },
                                                "netIncome": {
                                                    "type": "number"
                                                },
                                                "savingsRate": {
                                                    "type": "number"
                                                },
                                                "netWorth": {
                                                    "type": "number"
                                                },
                                                "transactionCount": {
                                                    "type": "number"
                                                },
                                                "avgExpenseAmount": {
                                                    "type": "number"
                                                },
                                                "avgIncomeAmount": {
                                                    "type": "number"
                                                }
                                            }
                                        },
                                        "categoryBreakdown": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "amount": {
                                                        "type": "number"
                                                    },
                                                    "count": {
                                                        "type": "number"
                                                    },
                                                    "color": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        },
                                        "incomeCategoryBreakdown": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "amount": {
                                                        "type": "number"
                                                    },
                                                    "count": {
                                                        "type": "number"
                                                    },
                                                    "color": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        },
                                        "monthlyTrends": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "month": {
                                                        "type": "string"
                                                    },
                                                    "income": {
                                                        "type": "number"
                                                    },
                                                    "expenses": {
                                                        "type": "number"
                                                    },
                                                    "net": {
                                                        "type": "number"
                                                    }
                                                }
                                            }
                                        },
                                        "accountBalances": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "balance": {
                                                        "type": "number"
                                                    },
                                                    "type": {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        },
                                        "dailyTrend": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "date": {
                                                        "type": "string"
                                                    },
                                                    "amount": {
                                                        "type": "number"
                                                    }
                                                }
                                            }
                                        },
                                        "topSpending": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "description": {
                                                        "type": "string"
                                                    },
                                                    "amount": {
                                                        "type": "number"
                                                    },
                                                    "category": {
                                                        "type": "string"
                                                    },
                                                    "date": {
                                                        "type": "string",
                                                        "format": "date-time"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/subscriptions/{id}/process": {
            "post": {
                "summary": "Manually process a subscription",
                "description": "Trigger the payment processing for a subscription (creates a transaction and updates the next billing date).",
                "tags": [
                    "Subscriptions"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription processed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Subscription"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Subscription not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/subscriptions/{id}": {
            "get": {
                "summary": "Get a subscription by ID",
                "description": "Retrieve details of a specific subscription.",
                "tags": [
                    "Subscriptions"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved subscription details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Subscription"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "403": {
                        "description": "Forbidden - subscription belongs to another user"
                    },
                    "404": {
                        "description": "Subscription not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "put": {
                "summary": "Update a subscription",
                "description": "Update details of an existing subscription.",
                "tags": [
                    "Subscriptions"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateSubscriptionInput"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Subscription successfully updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Subscription"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Subscription not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "delete": {
                "summary": "Delete a subscription",
                "description": "Permanently delete a subscription.",
                "tags": [
                    "Subscriptions"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Subscription successfully deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Subscription not found"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/subscriptions/process-due": {
            "post": {
                "summary": "Process all due subscriptions",
                "description": "Trigger processing for all subscriptions that are due for billing.",
                "tags": [
                    "Subscriptions"
                ],
                "responses": {
                    "200": {
                        "description": "Subscriptions processed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "processed": {
                                            "type": "number"
                                        },
                                        "subscriptions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Subscription"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/subscriptions": {
            "get": {
                "summary": "Get all subscriptions",
                "description": "Retrieve a list of subscriptions, optionally filtered by status or account.",
                "tags": [
                    "Subscriptions"
                ],
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "ACTIVE",
                                "PAUSED",
                                "CANCELLED"
                            ]
                        },
                        "description": "Filter by subscription status"
                    },
                    {
                        "name": "accountId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter by account ID"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved subscriptions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "subscriptions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Subscription"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a new subscription",
                "description": "Track a recurring payment.",
                "tags": [
                    "Subscriptions"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateSubscriptionInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Subscription successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Subscription"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/subscriptions/summary": {
            "get": {
                "summary": "Get subscriptions summary",
                "description": "Retrieve a summary of all subscriptions grouped by status and total monthly cost.",
                "tags": [
                    "Subscriptions"
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved summary",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "totalSubscriptions": {
                                            "type": "number"
                                        },
                                        "activeSubscriptions": {
                                            "type": "number"
                                        },
                                        "pausedSubscriptions": {
                                            "type": "number"
                                        },
                                        "cancelledSubscriptions": {
                                            "type": "number"
                                        },
                                        "totalMonthlyAmount": {
                                            "type": "number",
                                            "description": "Total cost normalized to monthly amount"
                                        },
                                        "nextBillingDate": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/transactions": {
            "get": {
                "summary": "Get all transactions",
                "description": "Retrieve a list of transactions, optionally filtered by account, category, type, or date range.",
                "tags": [
                    "Transactions"
                ],
                "parameters": [
                    {
                        "name": "accountId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter by account ID"
                    },
                    {
                        "name": "categoryId",
                        "in": "query",
                        "schema": {
                            "type": "string"
                        },
                        "description": "Filter by category ID"
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "EXPENSE",
                                "INCOME",
                                "TRANSFER"
                            ]
                        },
                        "description": "Filter by transaction type"
                    },
                    {
                        "name": "startDate",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Filter transactions after this date (YYYY-MM-DD)"
                    },
                    {
                        "name": "endDate",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "format": "date"
                        },
                        "description": "Filter transactions before this date (YYYY-MM-DD)"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved transactions",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "transactions": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Transaction"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            },
            "post": {
                "summary": "Create a new transaction",
                "description": "Create a new transaction entry (expense, income, or transfer).",
                "tags": [
                    "Transactions"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTransactionInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Transaction successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Transaction"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/transfers": {
            "post": {
                "summary": "Create a transfer",
                "description": "Transfer money between two accounts.",
                "tags": [
                    "Transactions"
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateTransferInput"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Transfer successfully created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Transaction"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Validation error"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        }
    },
    "tags": [
        {
            "name": "Auth",
            "description": "Authentication endpoints (BetterAuth)"
        }
    ]
}